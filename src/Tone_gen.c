/**
  ******************************************************************************
  * @file    Tone_gen.c
  * @author  Torsten Jaekel
  * @version V1.1.0
  * @date    04-September-2016
  * @brief   The test tone (sine wave) generator
  ******************************************************************************
  */

#include "Tone_gen.h"

const int16_t SineWave1KHz[AUDIO_IN_PACKET /2] = {
		0,0, 4277,4277, 8481,8481, 12539,12539, 16384,16384, 19947,19947, 23170,23170, 25996,25996, 28377,28377, 30273,30273, 31650,31650, 32487,32487, 32767,32767,
		32487,32487, 31650,31650, 30273,30273, 28377,28377, 25996,25996, 23170,23170, 19947,19947, 16384,16384, 12539,12539, 8481,8481, 4277,4277,
		0,0, -4277,-4277, -8481,-8481, -12539,-12539, -16384,-16384, -19947,-19947, -23170,-23170, -25996,-25996, -28377,-28377, -30273,-30273, -31650,-31650, -32487,-32487, -32767,-32767,
		-32487,-32487, -31650,-31650, -30273,-30273, -28377,-28377, -25996,-25996, -23170,-23170, -19947,-19947, -16384,-16384, -12539,-12539, -8481,-8481, -4277,-4277
};

void TONEGEN_CpySine(void)
{
	//copy the sine wave into output play buffer
	int i = 0;

	while (i < sizeof(BufferCtl.buff))
	{
		memcpy(&BufferCtl.buff[i], SineWave1KHz, AUDIO_IN_PACKET);
		i += AUDIO_IN_PACKET;
	}
}

int TONEGEN_GetSine(const int16_t **buf)
{
	*buf = SineWave1KHz;
	return sizeof(SineWave1KHz);
}
